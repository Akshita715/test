<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Indian Village Math Game</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #ffecd2, #fcb69f, #a1ffce);
      min-height: 100vh;
    }

    #village {
      position: relative;
      height: 520px;
      border-radius: 20px;
      background: linear-gradient(#87ceeb 60%, #4caf50 40%);
      overflow: hidden;
    }

    /* Village decorations */
    .decor {
      position: absolute;
      font-size: 48px;
    }

    /* Houses */
    .house {
      position: absolute;
      cursor: pointer;
      font-size: 48px;
    }

    /* Walkers */
    .walker {
      position: absolute;
      font-size: 36px;
      animation: walk 16s linear infinite;
    }

    @keyframes walk {
      from { left: -60px; }
      to { left: 100%; }
    }

    /* Child */
    .child {
      position: absolute;
      font-size: 32px;
      animation: pop 0.6s ease-out;
    }

    @keyframes pop {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }

    /* Celebration */
    .celebrate {
      animation: bounce 0.8s ease;
    }

    @keyframes bounce {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>

<div class="container py-3">
  <h3 class="text-center">ğŸ‡®ğŸ‡³ Indian Village Math Adventure</h3>

  <div class="d-flex justify-content-between flex-wrap text-center my-2">
    <div>â­ Score: <span id="score">0</span></div>
    <div>â±ï¸ Time: <span id="timer">10</span>s</div>
    <div>ğŸ§® Level: <span id="level">Easy</span></div>
  </div>

  <div id="village" class="mb-3">
    <!-- Decorations -->
    <div class="decor" style="left:20px; top:20px">â˜€ï¸</div>
    <div class="decor" style="right:20px; top:40px">â˜ï¸</div>
    <div class="decor" style="left:80px; top:260px">ğŸŒ³</div>
    <div class="decor" style="right:100px; top:260px">ğŸŒ´</div>
    <div class="decor" style="left:260px; top:280px">ğŸ›•</div>

    <!-- Houses -->
    <div class="house" style="left:60px; top:350px">ğŸ </div>
    <div class="house" style="left:200px; top:360px">ğŸ </div>
    <div class="house" style="left:350px; top:355px">ğŸ </div>
    <div class="house" style="left:500px; top:365px">ğŸ </div>

    <!-- Walkers -->
    <div class="walker" style="top:250px; animation-duration:18s">ğŸ„</div>
    <div class="walker" style="top:290px; animation-duration:20s">ğŸ</div>
    <div class="walker" style="top:220px; animation-duration:17s">ğŸ¦š</div>
    <div class="walker" style="top:190px; animation-duration:16s">ğŸ§‘ğŸ½â€ğŸŒ¾</div>
    <div class="walker" style="top:210px; animation-duration:15s">ğŸ‘³ğŸ½â€â™‚ï¸</div>
  </div>

  <div id="mathBox" class="card shadow p-3 d-none">
    <div class="card-body text-center">
      <h5 id="question"></h5>
      <input type="number" id="answer" class="form-control form-control-lg my-2 text-center" placeholder="Your Answer">
      <button class="btn btn-success btn-lg w-100" onclick="checkAnswer()">Submit</button>
      <div id="feedback" class="mt-2 fw-bold"></div>
    </div>
  </div>
</div>

<!-- Sounds -->
<audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>

<script>
  const houses = document.querySelectorAll('.house');
  const village = document.getElementById('village');
  const questionEl = document.getElementById('question');
  const feedback = document.getElementById('feedback');
  const scoreEl = document.getElementById('score');
  const timerEl = document.getElementById('timer');
  const levelEl = document.getElementById('level');

  let correctAnswer = 0;
  let score = 0;
  let timeLeft = 10;
  let timer;
  let level = 'Easy';

  function speak(text) {
    const msg = new SpeechSynthesisUtterance(text);
    speechSynthesis.speak(msg);
  }

  function generateMath() {
    let max = level === 'Easy' ? 9 : level === 'Medium' ? 15 : 20;
    const a = Math.floor(Math.random() * max) + 1;
    const b = Math.floor(Math.random() * max) + 1;
    const ops = ['+', '-', 'Ã—'];
    const op = ops[Math.floor(Math.random() * ops.length)];

    if (op === '+') correctAnswer = a + b;
    if (op === '-') correctAnswer = a - b;
    if (op === 'Ã—') correctAnswer = a * b;

    const q = `${a} ${op} ${b}`;
    questionEl.textContent = `ğŸ§’ Solve: ${q}`;
    speak(`Solve ${a} ${op === 'Ã—' ? 'times' : op} ${b}`);

    startTimer();
  }

  function startTimer() {
    clearInterval(timer);
    timeLeft = 10;
    timerEl.textContent = timeLeft;

    timer = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft;
      if (timeLeft === 0) {
        clearInterval(timer);
        feedback.textContent = 'â° Time up!';
        document.getElementById('wrongSound').play();
      }
    }, 1000);
  }

  houses.forEach(house => {
    house.addEventListener('click', () => {
      document.querySelectorAll('.child').forEach(c => c.remove());

      const child = document.createElement('div');
      child.className = 'child';
      child.textContent = 'ğŸ§’ğŸ½';
      child.style.left = house.style.left;
      child.style.top = (parseInt(house.style.top) - 40) + 'px';
      village.appendChild(child);

      document.getElementById('mathBox').classList.remove('d-none');
      document.getElementById('answer').value = '';
      feedback.textContent = '';

      generateMath();
    });
  });

  function checkAnswer() {
    const userAnswer = parseInt(document.getElementById('answer').value);
    if (userAnswer === correctAnswer) {
      score += 10;
      scoreEl.textContent = score;
      feedback.textContent = 'ğŸ‰ Correct!';
      feedback.classList.add('celebrate');
      document.getElementById('correctSound').play();

      if (score >= 50 && level === 'Easy') level = 'Medium';
      if (score >= 100 && level === 'Medium') level = 'Hard';
      levelEl.textContent = level;
    } else {
      feedback.textContent = 'âŒ Try again';
      document.getElementById('wrongSound').play();
    }
  }
</script>

</body>
</html>
